# 0-1Learning

![alt text](../../static/common/svg/luoxiaosheng.svg "公众号")
![alt text](../../static/common/svg/luoxiaosheng_learning.svg "学习")
![alt text](../../static/common/svg/luoxiaosheng_wechat.svg "微信")
![alt text](../../static/common/svg/luoxiaosheng_gitee.svg "码云")


## 条件查询和数据排序

### 前言 
    有了数据库和数据，下面我们肯定是要查询数据库，编写第一条查询语句。

### 要点
1) 运算符的使用 
2）Order by的使用

### 限制数据和对数据排序

3.1WHERE子句的使用

3.2ORDER BY子句的使用


### WHERE子句的使用 

使用WHERE子句限定返回的记录

• WHERE子句在 FROM 子句后

• 语法：

SELECT *|{[DISTINCT] 列名|表达式 [别名][,...]} FROM 表名 [WHERE 条件];

• 查询公司月薪高于12000的员工信息。

SELECT employee_id, last_name, salary FROM employees WHERE salary >= 12000;

• 查询部门编号为20的所有员工

SELECT * FROM emp WHERE deptno= 20;

### 比较运算符的使用
|运算符|含义|
|---|---|
|=|等于|
|>|大于|
|>=|大于等于|
|<|小于|
|<=|小于等于|
|<>|不等于|

### 字符型与日期型大小写敏感的实例

• 使用比较运算符需要遵循以下原则：

– 字符及日期类型需要在两端用单引号；

– 字符类型大小写敏感；

– 日期类型格式敏感，默认格式’DD-MON-RR’;

• 查询在1999年1月1日以后进入公司的雇员信息。

SELECT last_name, hire_date FROM employees WHERE hire_date >= '01-1月-1999';

• 转换英文环境 – 查询在1999年1月1日以后进入公司的雇员信息（英文环境）

ALTER SESSION SET NLS_LANGUAGE='AMERICAN';

SELECT last_name, hire_date FROM employees WHERE hire_date >= '01-JAN-1999';

### 特殊比较运算符
|运算符 |含义|
|---|---|
|BETWEEN...AND...|    确定范围，在两个值之间 (包含比较值)|
|IN（ 列表）| 确定集合|
|LIKE   | 字符串匹配查询|
|IS NULL |判断空值|


#### BETWEEN…AND…运算符的使用
• 查询月薪在4200元到6000公司的雇员。

SELECT employee_id, last_name, salary
FROM employees
WHERE salary BETWEEN 4200 AND 6000;

#### IN运算符的使用
• IN运算符主要对指定的值进行比较查看的时候使用。

• 查询部门编号为10、90或110的雇员信息。

SELECT employee_id, last_name, salary, department_id FROM employees WHERE department_id IN (10, 90, 110);

#### LIKE运算符的使用

• 使用LIKE运算符完成模糊查询功能

• 使用通配符来代替未知的信息。常用通配符有 %和_ 。

– %可以代替任意长度字符（包括长度为0）。

– _可以代替一个字符。

• 查询last_name首字母是S的雇员信息。

SELECT employee_id, last_name, salary FROM employees WHERE last_name LIKE 'S%';


• %与_组合使用

• 查询last_name第二个字母是b的雇员信息。

SELECT employee_id, last_name, salary FROM employees WHERE last_name LIKE '_b%';


• 使用ESCAPE 标识符来查找带特殊符号的字符号。

• 查询JOB_ID以“FI_”开头的雇员信息。

SELECT employee_id, last_name, job_id, salary FROM employees WHERE job_id LIKE 'FI\_%' ESCAPE '\';

#### IS NULL运算符的使用

• 查询包含空值的记录

• 未分配部门的雇员信息。

SELECT employee_id, last_name, salary, department_id FROM employees WHERE department_id IS NULL;

### 逻辑运算符的使用
|运算符 |含义|
|---|---|
|AND |如果组合的条件都是TRUE,返回TRUE。NULL和 FALSE组合，返回FALSE。|
|OR  |如果组合的条件之一是TRUE,返回TRUE。NULL和 TRUE组合，返回TRUE。|
|NOT |如果下面的条件是FALSE,返回TRUE。|

• 查询月薪在4200元到6000元公司的雇员。
SELECT employee_id, last_name, salary FROM employees WHERE salary>=4200 AND salary<=6000;

• 月薪大于10000元，并且在60和90号部门工作的员工。
SELECT last_name, salary, department_id FROM employees WHERE salary>10000 AND department_id in (60,90);

• 月薪大于10000元，或者在60和90号部门工作的员工。
SELECT last_name, salary, department_id FROM employees WHERE salary>10000 OR department_id in (60,90);

• 查找职位不是IT_PROG，ST_CLERK,FI_ACCOUNT的员工 信息。

SELECT last_name, job_id, salary FROM employees WHERE job_id NOT IN ('IT_PROG', 'ST_CLERK', 'FI_ACCOUNT');

NOT运算符还可以和BETWEEN…AND、LIKE、IS NULL一起使用。

– ...WHERE department_id NOT IN (60, 90);

– ... WHERE salary NOT BETWEEN 10000 AND 25000;

– ... WHERE last_name NOT LIKE 'D%'

– ... WHERE manager_id IS NOT NULL

### 运算符的优先级
• 括号’()’优先于其他操作符。

|优先级 |运算分类   | 运算符举例|
|---|---|---|
|1   |数学运算符   *, \, +, -|
|2   |连接运算符   |||
|3   |通用比较运算符 =, <>, <, >, <=, >=|
|4   |其他比较运算符 IS [NOT] NULL, LIKE, [NOT] BETWEEN, [NOT] IN|
|5   |逻辑非 NOT|
|6   |逻辑与 AND|
|7   |逻辑或 OR|


查找职位是FI_ACCOUNT或工资超过16000的职位是AD_VP的员 工。

SELECT last_name, job_id, salary, department_id FROM employees WHERE job_id = 'FI_ACCOUNT' OR job_id = 'AD_VP' AND salary > 16000;

查找工作超过16000并且职位是FI_ACCOUNT或是AD_VP的员工。

SELECT last_name, job_id, salary, department_id FROM employees WHERE (job_id = 'FI_ACCOUNT' OR job_id = 'AD_VP') AND salary > 16000;

### ORDER BY子句

• ORDER BY子句后的语法结构如下：

SELECT *|{[DISTINCT] 列名|表达式 [别名][,...]} FROM 表名 [WHERE 条件] [ORDER BY {列名|表达式|别名} [ASC|DESC],…];

查看公司员工信息，按照员工部门降序排列。

SELECT last_name, job_id, salary, department_id FROM employees ORDER BY department_id DESC;


• 不同数据类型排序规则(以升序为例)

– 数字升序排列小值在前，大值在后。即按照数字大小顺序由 小到大排列。

– 日期升序排列相对较早的日期在前，较晚的日期在后。例 如：’01-SEP-06’在’01-SEP-07’前。

– 字符升序排列按照字母由小到大的顺序排列。即由A-Z排列； 中文升序按照字典顺序排列。

– 空值在升序排列中排在最后，在降序排列中排在最开始。


• 使用列别名排序，多列排序。 查看员工信息，结果按照年薪升序排列。

SELECT last_name, job_id, salary*12 annual, department_id FROM employees ORDER BY annual;

查看员工信息，结果按照job_id升序排列，月薪按照降序排列。

SELECT last_name, job_id, salary, department_id FROM employees ORDER BY job_id, salary desc;


• ORDER BY特殊使用 – ORDER BY子句可以出现在SELECT子句中没有出现过的列。

– ORDER BY子句后的列名，可以用数字来代替。这个数字是 SELECT语句后列的顺序号。

查看公司员工信息，按照月薪由高到低排列，而具体的工资数不 显示。

SELECT last_name, job_id, hire_date FROM employees ORDER BY salary;


• 查看员工信息，结果按照按照job_id升序排列，月薪按照降序 排列。

SELECT last_name, job_id, salary, department_id FROM employees ORDER BY 2, 3 desc;



